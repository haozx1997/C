<!DOCTYPE html>
<!-- saved from url=(0077)http://bestcoder.hdu.edu.cn/contests/contest_showproblem.php?cid=690&pid=1001 -->
<html class="no-js"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=GBK">
		
		<meta name="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<meta name="description" content="An online judge paltform for learning and judging c/c++/java/pascal program.">
		<meta name="author" content="HDU ACM Team">
		<link rel="shortcut icon" href="http://bestcoder.hdu.edu.cn/assets/images/favicon.ico" type="image/x-icon">
		<link rel="stylesheet" href="./Problem - 1001_files/bootstrap.min.css">
		<link rel="stylesheet" href="./Problem - 1001_files/bootstrap-theme.min.css">
		<link rel="stylesheet" href="./Problem - 1001_files/font-awesome.min.css">
		<link rel="stylesheet" href="./Problem - 1001_files/katex.min.css">
		<link rel="stylesheet" href="./Problem - 1001_files/mdeditor.css">
		<link rel="stylesheet" href="./Problem - 1001_files/bestcoder.css">
		<script src="./Problem - 1001_files/jquery-1.11.1.min.js"></script><style type="text/css"></style>
		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
	  		<script src="//acm.hdu.edu.cn/assets/js/html5shiv.min.js"></script>
			<link href="//acm.hdu.edu.cn/assets/respond-proxy.html" id="respond-proxy" rel="respond-proxy">
			<link href="//acm.hdu.edu.cn/assets/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
	  		<script src="//acm.hdu.edu.cn/assets/js/respond.min.js"></script>
	  		<script src="//acm.hdu.edu.cn/assets/js/polyfill.js"></script>
			<script type="text/x-mathjax-config">
				MathJax.Hub.Config({
					tex2jax: {inlineMath: [['$', '$']]},
					messageStyle: "none"
				});
			</script>
	  		<script src="//cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		<![endif]-->
		<title>Problem - 1001</title>
	<link rel="stylesheet" href="./Problem - 1001_files/default.css" type="text/css"></head>
	<body>
		<a name="top"></a>
		<div class="navbar navbar-inverse" role="navigation">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
						<span class="sr-only">navigation switch</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand hidden-sm" href="http://bestcoder.hdu.edu.cn/"><img src="./Problem - 1001_files/bestcoder.png" alt="BestCoder"></a>
                    <a class="navbar-brand visible-sm" href="http://bestcoder.hdu.edu.cn/"><img src="./Problem - 1001_files/sublogo.png" alt="BestCoder"></a>
				</div>
				<div id="navbar" class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
			    		<li class="hidden-sm hidden-xs"><a href="http://bestcoder.hdu.edu.cn/">Home</a></li>
			    		<li><a href="http://bestcoder.hdu.edu.cn/contests/contest_list.php">Contests</a></li>
			    		<li><a href="http://bestcoder.hdu.edu.cn/contests/contest_notification.php?cid=690">Notification</a></li>
			      		<li><a href="http://bestcoder.hdu.edu.cn/contests/contest_listtopic.php?cid=690">Clarification</a></li>
			      		<li><a href="http://bestcoder.hdu.edu.cn/contests/contest_show.php?cid=690">Problems</a></li>
			      		<li><a href="http://bestcoder.hdu.edu.cn/contests/ranklist.php?cid=690">Ranklist</a></li>
			      		<li><a href="http://bestcoder.hdu.edu.cn/contests/contest_status.php?cid=690">Status</a></li>
			      		<li><a href="http://bestcoder.hdu.edu.cn/contests/contest_hackstatus.php?cid=690">HackStatus</a></li>
			    	</ul>
			    	<ul class="nav navbar-nav navbar-right hidden-sm hidden-xs">
					    <li class="pull-right countdown" style=""><span class="hour">35</span> : <span class="minute">47</span> : <span class="second">11</span></li>
			    	</ul>
			    </div>
			</div>
		</div><div class="container"><div class="progress progress-striped active" style="display: none;"><div class="progress-bar progress-bar-success"><span></span></div></div></div>
		<div class="container">
	<div id="problem-info">
		<h1>Problem A</h1>
		<div class="problem-statistic">
			<span class="fa fa-check text-success"></span> Accepts: 0		</div>
		<div class="problem-statistic">
			<span class="fa fa-bar-chart text-info"></span> Submissions: 4		</div>
		<div>
			<div class="problem-statistic">
				<span class="fa fa-clock-o"></span> Time Limit: 2000/1000 MS (Java/Others)
			</div>
			<div class="problem-statistic">
				<span class="fa fa-th-large"></span> Memory Limit: 65536/65536 K (Java/Others)
			</div>
					</div>
	</div>
	<div class="problem">
		<div class="problem-widget">
			<div class="problem-widget-title">Problem Description</div>
			<div class="problem-widget-content markdown marked"><p>度熊手上有一本字典存储了大量的单词，有一次，他把所有单词组成了一个很长很长的字符串。现在麻烦来了，他忘记了原来的字符串都是什么，神奇的是他竟然记得原来那些字符串的哈希值。一个字符串的哈希值，由以下公式计算得到：</p>
<p><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mo>(</mo><mi>s</mi><mo>)</mo><mo>=</mo><msubsup><mo>∏</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>i</mi><mo>≤</mo><mi>l</mi><mi>e</mi><mi>n</mi><mo>(</mo><mi>s</mi><mo>)</mo></mrow></msubsup><mo>(</mo><msub><mi>S</mi><mrow><mi>i</mi></mrow></msub><mo>&#8722;</mo><mn>2</mn><mn>8</mn><mo>)</mo><mtext>&nbsp;</mtext><mo>(</mo><mi>m</mi><mi>o</mi><mi>d</mi><mtext>&nbsp;</mtext><mn>9</mn><mn>9</mn><mn>7</mn><mn>3</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">H(s)=\prod_{i=1}^{i\leq len(s)}(S_{i}-28)\ (mod\ 9973)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 1.0448em;"></span><span class="strut bottom" style="height: 1.32166em; vertical-align: -0.276864em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mrel">=</span><span class="mop"><span class="op-symbol small-op mop" style="top: -5e-06em;">∏</span><span class="vlist"><span class="" style="top: 0.276864em; margin-left: 0em; margin-right: 0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;"></span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord">1</span></span></span></span><span class="" style="top: -0.5198em; margin-right: 0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;"></span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">i</span><span class="mrel">≤</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;"></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.05764em;">S</span><span class="vlist"><span class="" style="top: 0.15em; margin-right: 0.05em; margin-left: -0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;"></span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;"></span></span></span></span></span><span class="mbin">&#8722;</span><span class="mord">2</span><span class="mord">8</span><span class="mclose">)</span><span class="mord mspace">&nbsp;</span><span class="mopen">(</span><span class="mord mathit">m</span><span class="mord mathit">o</span><span class="mord mathit">d</span><span class="mord mspace">&nbsp;</span><span class="mord">9</span><span class="mord">9</span><span class="mord">7</span><span class="mord">3</span><span class="mclose">)</span></span></span></span></span></p>
<p><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mrow><mi>i</mi></mrow></msub></mrow><annotation encoding="application/x-tex">S_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.68333em;"></span><span class="strut bottom" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right: 0.05764em;">S</span><span class="vlist"><span class="" style="top: 0.15em; margin-right: 0.05em; margin-left: -0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;"></span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;"></span></span></span></span></span></span></span></span></span>代表 S[i] 字符的 ASCII 码。</p>
<p>请帮助度熊计算大字符串中任意一段的哈希值是多少。</p>
</div>
		</div>
		<div class="problem-widget">
			<div class="problem-widget-title">Input</div>
			<div class="problem-widget-content markdown marked"><p>多组测试数据，每组测试数据第一行是一个正整数<span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.68333em;"></span><span class="strut bottom" style="height: 0.68333em; vertical-align: 0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right: 0.10903em;">N</span></span></span></span></span>，代表询问的次数，第二行一个字符串，代表题目中的大字符串，接下来<span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.68333em;"></span><span class="strut bottom" style="height: 0.68333em; vertical-align: 0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right: 0.10903em;">N</span></span></span></span></span>行，每行包含两个正整数<span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.43056em;"></span><span class="strut bottom" style="height: 0.43056em; vertical-align: 0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span></span></span></span></span>和<span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.69444em;"></span><span class="strut bottom" style="height: 0.69444em; vertical-align: 0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span></span>，代表询问的起始位置以及终止位置。</p>
<p><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mn>0</mn><mn>0</mn></mrow><annotation encoding="application/x-tex">1\leq N\leq 1,000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.68333em;"></span><span class="strut bottom" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="base textstyle uncramped"><span class="mord">1</span><span class="mrel">≤</span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mrel">≤</span><span class="mord">1</span><span class="mpunct">,</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span></span></p>
<p><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>≤</mo><mi>l</mi><mi>e</mi><mi>n</mi><mo>(</mo><mi>s</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo>)</mo><mo>≤</mo><mn>1</mn><mn>0</mn><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mn>0</mn><mn>0</mn></mrow><annotation encoding="application/x-tex">1\leq len(string)\leq 100,000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.75em;"></span><span class="strut bottom" style="height: 1em; vertical-align: -0.25em;"></span><span class="base textstyle uncramped"><span class="mord">1</span><span class="mrel">≤</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right: 0.03588em;">g</span><span class="mclose">)</span><span class="mrel">≤</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mpunct">,</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span></span></p>
<p><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>≤</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo>≤</mo><mi>l</mi><mi>e</mi><mi>n</mi><mo>(</mo><mi>s</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">1\leq a,b\leq len(string)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.75em;"></span><span class="strut bottom" style="height: 1em; vertical-align: -0.25em;"></span><span class="base textstyle uncramped"><span class="mord">1</span><span class="mrel">≤</span><span class="mord mathit">a</span><span class="mpunct">,</span><span class="mord mathit">b</span><span class="mrel">≤</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right: 0.03588em;">g</span><span class="mclose">)</span></span></span></span></span></p>
</div>
		</div>
		<div class="problem-widget">
			<div class="problem-widget-title">Output</div>
			<div class="problem-widget-content markdown marked"><p>对于每一个询问，输出一个整数值，代表大字符串从 <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.43056em;"></span><span class="strut bottom" style="height: 0.43056em; vertical-align: 0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span></span></span></span></span> 位到 <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.69444em;"></span><span class="strut bottom" style="height: 0.69444em; vertical-align: 0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span></span> 位的子串的哈希值。</p>
</div>
		</div>
		<div class="problem-widget">
			<div class="problem-widget-title">Sample Input</div>
			<div class="problem-widget-content clipboard"><button class="copy" data-clipboard-target="#simple-input-data">Copy</button><pre id="simple-input-data">2
ACMlove2015
1 11
8 10
1
testMessage
1 1
</pre></div>
		</div>
		<div class="problem-widget">
			<div class="problem-widget-title">Sample Output</div>
			<div class="problem-widget-content clipboard"><button class="copy" data-clipboard-target="#simple-output-data">Copy</button><pre id="simple-output-data">6891
9240
88
</pre></div>
		</div>
		<div class="problem-footer">
			<a href="http://bestcoder.hdu.edu.cn/contests/contest_statistic.php?cid=690&amp;pid=1001">Statistic</a> | <a href="http://bestcoder.hdu.edu.cn/contests/contest_submit.php?cid=690&amp;pid=1001">Submit</a> | <a href="http://bestcoder.hdu.edu.cn/contests/contest_listtopic.php?cid=690">Clarifications</a> | <a href="http://bestcoder.hdu.edu.cn/contests/contest_showproblem.php?cid=690&amp;pid=1001#" class="go-back">Back</a>
		</div>
	</div>
</div>
        <div class="footer">
             <div class="version">BestCoder Contest System 2.0</div>
             <div class="copyright">Copyright &#169; 2014-2016 <a href="mailto:hduacm@qq.com">HDU ACM Team</a></div>
        </div>
        <script src="./Problem - 1001_files/jquery.cookie.js"></script>
        <script src="./Problem - 1001_files/bootstrap.min.js"></script>
        <script src="./Problem - 1001_files/marked.min.js"></script>
        <script src="./Problem - 1001_files/katex.min.js"></script>
        <script src="./Problem - 1001_files/auto-render.min.js"></script>
        <script src="./Problem - 1001_files/highlight.min.js"></script>
        <script src="./Problem - 1001_files/clipboard.min.js"></script>
        <script src="./Problem - 1001_files/bestcoder.js"></script><ul id="message-box" class="list-group" style="display: none;"><li class="list-group-item list-group-header"><span>2016"百度之星" - 资格赛（Astar Round1）</span><button type="button" class="close" data-dismiss="#message-box">×</button></li><li class="list-group-item">2016"百度之星" - 资格赛（Astar Round1） Start.<span class="time">12:00</span></li></ul>
        <script type="text/javascript">
            setTimeout(function () {
                getMsg(690);
            }, 1000);
        </script>
    

</body><iframe id="tmp_downloadhelper_iframe" style="display: none;" src="./Problem - 1001_files/saved_resource.html"></iframe></html>